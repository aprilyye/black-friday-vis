<!DOCTYPE html>
<html lang="en">

<head>
  <!-- <title>Kenny Zhou (kz68), April Ye (yy459), Kelly Yu - Project 1</title> -->
  <meta charset="UTF-8">
  <script src="https://d3js.org/d3.v5.min.js"></script>
</head>

<body>
  <h1>Kenny Zhou (kz68), April Ye (yy459), Kelly Yu - Project 1</h1>
  <script>
    var blackFridayData;
    d3.csv("BlackFriday.csv").then(function(data) {
      blackFridayData = data;
      console.log("data =", blackFridayData); // confirm data is successfully loaded

      var females = males = 0;
      // females age group counters initialized
      var f0to17 = f18to25 = f26to35 = f36to45 = 0;
      var f0to17Purchase = f18to25Purchase = f26to35Purchase = f36to45Purchase = 0;
      // male age group counters initialized
      var m0to17 = m18to25 = m26to35 = m36to45 = 0;
      var m0to17Purchase = m18to25Purchase = m26to35Purchase = m36to45Purchase = 0;
      blackFridayData.forEach(d => {
        if (d['Gender'] == "F") {
          females++;
          if (d['Age'] == "0-17") {
            f0to17++;
            f0to17Purchase += parseInt(d['Purchase']);
          } else if (d['Age'] == "18-25") {
            f18to25++;
            f18to25Purchase += parseInt(d['Purchase']);
          } else if (d['Age'] == "26-35") {
            f26to35++;
            f26to35Purchase += parseInt(d['Purchase']);
          } else if (d['Age'] == "36-45") {
            f36to45++;
            f36to45Purchase += parseInt(d['Purchase']);
          }
        } else if (d['Gender'] == "M") {
          males++;
          if (d['Age'] == "0-17") {
            m0to17++;
            m0to17Purchase += parseInt(d['Purchase']);
          } else if (d['Age'] == "18-25") {
            m18to25++;
            m18to25Purchase += parseInt(d['Purchase']);
          } else if (d['Age'] == "26-35") {
            m26to35++;
            m26to35Purchase += parseInt(d['Purchase']);
          } else if (d['Age'] == "36-45") {
            m36to45++;
            m36to45Purchase += parseInt(d['Purchase']);
          }
        }

      });

      // calculating percentages
      var f0to17Percent = (f0to17/females).toFixed(2);
      var f18to25Percent = (f18to25/females).toFixed(2);
      var f26to35Percent = (f26to35/females).toFixed(2);
      var f36to45Percent = (f36to45/females).toFixed(2);

      var m0to17Percent = (m0to17/males).toFixed(2);
      var m18to25Percent = (m18to25/males).toFixed(2);
      var m26to35Percent = (m26to35/males).toFixed(2);
      var m36to45Percent = (m36to45/males).toFixed(2);


      // outputting results
      console.log("females =", females);
      console.log("females17 =", f0to17, f0to17Percent, f0to17Purchase);
      console.log("females18 =", f18to25, f18to25Percent, f18to25Purchase);
      console.log("females26 =", f26to35, f26to35Percent, f26to35Purchase);
      console.log("females36 =", f36to45, f36to45Percent, f36to45Purchase);

      console.log("males =", males);
      console.log("males17 =", m0to17, m0to17Percent, m0to17Purchase);
      console.log("males18 =", m18to25, m18to25Percent, m18to25Purchase);
      console.log("males26 =", m26to35, m26to35Percent, m26to35Purchase);
      console.log("males36 =", m36to45, m36to45Percent, m36to45Purchase);


    })
    .catch((err) => {
      throw new Error("Something went wrong", err);
    });
  </script>
</body>

</html>
